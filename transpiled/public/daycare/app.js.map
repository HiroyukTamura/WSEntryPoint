{"version":3,"sources":["../../../public/daycare/app.js"],"names":["defaultDatabase","masterJson","myChart","MODE_WEEK","MODE_MONTH","displayMode","loginedUser","menuMon","$","menuWeek","currentMoment","moment","bgParam","smParam","tbody","eq","find","chartWrapper","errNonData","postLoad","headerBtnEnable","progress","pageContent","query","window","onload","init","defaultApp","firebase","initializeApp","CONFIG","database","hide","onLoginSuccess","initDrawerDecoration","setDisplayMode","mode","attr","getDaysOfWeek","now","dayOfWeek","day","add","days","i","push","format","getDaysOfMonth","start","startOf","end","endOf","date","console","log","ScheduleParser","getScheduleAsync","on","e","removeAttr","resetUi","showData","SummeryParser","getSummeryDataAsync","click","ev","css","tbodyE","empty","prototype","scheme","makeRefScheme","ref","once","then","snapshot","exists","specMoment","key","count","forEach","childSnap","htmlE","wodList","tr","td","rowspan","numChildren","class","html","append","appendTo","isFirstItem","schSnap","title","child","val","groupName","colorVal","tdItem","createTd","colors","parseInt","addClass","trSingle","setElementAsMdl","schemePrev","snap","snapPrev","recordCount","ratio","clonedMoment","prevMoment","regExp","RegExp","DELIMITER","spaceRow","generateTableBorder","rangeDatas","eveDatas","cap","radioCap","clone","setSchemes","self","calcRatio","setAverageTable","onGetPrevData","recordCountPrev","diffCount","symbol","ratioPrev","diffRatio","symbol2","ratioHtml","setPrevCaption","Math","floor","daysInMonth","rowCount","rangeTitle","replace","startMinTotal","endMinTotal","startMin","startTime","min2TimeVal","endMin","endTime","timeLen","roundWithDigit","abs","lenTime","dom","row1","caption","row2","space","min","hour","timeVal","row","space0","space1","specStartMin","specEndMin","diffLenTime","diffHourStart","symbolStart","valStart","diffHourEnd","symbolEnd","valEnd","symbolCount","valCount","diffHour","minute","uid","dates","getCount","node","masterData","arr","toJSON","newArr","Object","values","value","length","displayTest","parent","next","children","remove","id","keys","timeData","setTitle","chart","data","json","JSON","parse","rangeList","entry","getTime","getTimeVal","label","name","offset","pushData","getRangeArr","colorNum","getRangeStart","getRangeEnd","arrH","eventList","time","initTabLayout2","update","firstDate","titleMonth","titleWeek","momentO","toString","month","firstKey","maximum","getMaximumFromMode","startCal","getStartCal","yAxis","getYaxis","ctx","Chart","getContext","type","labels","makeXaxis","datasets","options","responsive","maintainAspectRatio","scales","yAxes","ticks","suggestedMin","suggestedMax","reverse","stepSize","callback","index","xAxes","autoSkip","maxRotation","minRotation","display","legend","tooltips","callbacks","intersect","toolTips","tooltipItem","datasetIndex","cal","firstCal","limit","entryC","hourOfDay","showStartRadius","showEndRadius","color","radiuses","setRadius","pointRadius","pointHoverRadius","backgroundColor","pointHoverBackgroundColor","borderColor","fill","dataArr","indexOf","lastIndexOf","radiusArr","arrC","n","dateC","arrD","arrE","num","digit","round","className","colspan","bgColumns","smColumns","hasOwnProperty","dataType","addNormalColumn","addBgColumn","addSmColumn","fixBgColumnSpan","addRowsToTable","dataName","valuePos","split","smVals","totalLen","smColumnVals","smColumnKeys","len","masterKeys","_loop","k","rowHead","holidayKey","holidayPos","HOLIDAYS","keyLen","td0","titleVal","setTagInCell","m","pos","vals","tdE","titleValE","span","_td","substring","first","second","dropDownBtn","onclick","tippy","updateDuration","popperOptions","modifiers","preventOverflow","enabled","highlightColors","chipsHtml","expandText","ele","closest","txt","componentHandler","upgradeElement"],"mappings":"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","file":"app.js","sourcesContent":["\"use strict\";\n\nvar defaultDatabase = void 0;\nvar masterJson = {};\nvar myChart = void 0;\nvar MODE_WEEK = 7;\nvar MODE_MONTH = 0;\nvar displayMode = void 0;\nvar loginedUser = void 0;\nvar menuMon = $('#dpdn-month');\nvar menuWeek = $('#dpdn-week');\nvar currentMoment = moment();\nvar bgParam = $('#bg-param');\nvar smParam = $('#sm-param');\nvar tbody = $(\".chart-ave\").eq(0).find('tbody');\nvar chartWrapper = $('#chart_w');\nvar errNonData = $('.err-non-data');\n\n/*---------loading系------*/\nvar postLoad = $('#post_load');\nvar headerBtnEnable = false; //これがfalseのとき、ヘッダボタンを押しても動作させない。\nvar progress = $('#progress');\nvar pageContent = $('.page-content');\n// var innerProgress =$('.inner-progress');\nvar query = \"1JLRZXEkNuPSzC1iIWrJFmPd9ry2\";\n\nwindow.onload = function init() {\n\n    var defaultApp = firebase.initializeApp(CONFIG);\n    defaultDatabase = defaultApp.database();\n    progress.hide();\n    $('#login_w').hide();\n    onLoginSuccess();\n    initDrawerDecoration();\n};\n\nfunction setDisplayMode(mode) {\n    switch (mode) {\n        case MODE_WEEK:\n            menuWeek.attr('disabled', '');\n            break;\n        case MODE_MONTH:\n            menuMon.attr('disabled', '');\n            break;\n    }\n    displayMode = mode;\n}\n\nfunction getDaysOfWeek() {\n    var now = moment(currentMoment);\n    var dayOfWeek = now.day();\n    now.add(-dayOfWeek, 'd');\n    var days = [];\n    for (var i = 0; i < 7; i++) {\n        days.push(now.format('YYYYMMDD'));\n        now.add(1, 'd');\n    }\n    return days;\n}\n\nfunction getDaysOfMonth() {\n    var now = moment(currentMoment);\n    var start = moment(now).startOf('month');\n    var end = now.endOf('month').date();\n    var days = [];\n    for (var i = 0; i < end; i++) {\n        days.push(start.format('YYYYMMDD'));\n        start.add(1, 'd');\n    }\n    return days;\n}\n\nfunction onLoginSuccess() {\n    console.log('ご本人でーす');\n    new ScheduleParser().getScheduleAsync();\n\n    if (!displayMode) {\n        menuWeek.on('click', function (e) {\n            if (displayMode !== MODE_WEEK && headerBtnEnable) {\n                headerBtnEnable = false;\n                displayMode = MODE_WEEK;\n                $(this).attr('disabled', '');\n                menuMon.removeAttr('disabled');\n                setDisplayMode(MODE_WEEK);\n\n                pageContent.hide();\n                // innerProgress.css('display', \"inline\");\n                resetUi();\n                showData(query);\n                new ScheduleParser().getScheduleAsync();\n                new SummeryParser().getSummeryDataAsync();\n            }\n            return false;\n        });\n\n        menuMon.on('click', function (e) {\n            if (displayMode !== MODE_MONTH && headerBtnEnable) {\n                headerBtnEnable = false;\n                displayMode = MODE_MONTH;\n                $(this).attr('disabled', '');\n                menuWeek.removeAttr('disabled');\n                setDisplayMode(MODE_MONTH);\n\n                pageContent.hide();\n                // innerProgress.css('display', \"inline\");\n                resetUi();\n                showData(query);\n                new ScheduleParser().getScheduleAsync();\n                new SummeryParser().getSummeryDataAsync();\n            }\n            return false;\n        });\n\n        $('#prev_btn').on({ \"click\": function click(ev) {\n                if (!headerBtnEnable) return false;\n\n                switch (displayMode) {\n                    case MODE_WEEK:\n                        currentMoment.add(-7, 'd');\n                        break;\n                    case MODE_MONTH:\n                        currentMoment.add(-1, 'M');\n                        break;\n                }\n\n                pageContent.hide();\n                // innerProgress.css('display', \"inline\");\n                resetUi();\n                showData(query);\n                new ScheduleParser().getScheduleAsync();\n                new SummeryParser().getSummeryDataAsync();\n\n                return false;\n            } });\n\n        $('#next_btn').on({ \"click\": function click(ev) {\n                if (!headerBtnEnable) return false;\n\n                switch (displayMode) {\n                    case MODE_WEEK:\n                        currentMoment.add(7, 'd');\n                        break;\n                    case MODE_MONTH:\n                        currentMoment.add(1, 'M');\n                        break;\n                }\n\n                pageContent.css('display', 'none');\n                // innerProgress.css('display', \"inline\");\n                resetUi();\n                showData(query);\n                new ScheduleParser().getScheduleAsync();\n                new SummeryParser().getSummeryDataAsync();\n\n                return false;\n            } });\n    }\n\n    setDisplayMode(MODE_MONTH);\n\n    showData(query);\n\n    new SummeryParser().getSummeryDataAsync();\n}\n\n//todo モード別\n(function () {\n\n    var tbodyE = $('#third-card tbody');\n\n    // var userDataSnap, scheduleSnap;\n\n    function ScheduleParser() {\n        console.log('ScheduleParser()');\n        tbodyE.empty();\n    }\n\n    ScheduleParser.prototype.getScheduleAsync = function () {\n        var scheme = makeRefScheme(['combinedCalendar', query, currentMoment.format('YYYYMM')]);\n\n        defaultDatabase.ref(scheme).once('value').then(function (snapshot) {\n            if (!snapshot.exists()) {\n                //todo スケジュールがありません\n                return;\n            }\n\n            var specMoment = moment(snapshot.key, 'YYYYMM');\n\n            var count = 1;\n            snapshot.forEach(function (childSnap) {\n                var date = childSnap.key;\n                specMoment.date(date);\n                var htmlE = date + '(' + wodList[specMoment.day()] + ')';\n                var tr = $('<tr>');\n                var td = $('<td>', {\n                    rowspan: childSnap.numChildren(),\n                    class: 'left-column'\n                }).html(htmlE);\n                tr.append(td).appendTo(tbodyE);\n\n                var isFirstItem = true;\n                childSnap.forEach(function (schSnap) {\n                    // $('<tr><td class=\"seem\" colspan=\"2\"></td></tr>').appendTo(tbody);\n                    var title = schSnap.child('title').val();\n                    var groupName = schSnap.child('groupName').val();\n                    var colorVal = schSnap.child('colorNum').val();\n                    var tdItem = createTd(title, groupName);\n                    tdItem.find('.mdl-list__item-primary-content').css('border-left-color', colors[parseInt(colorVal)]);\n                    if (isFirstItem) {\n                        isFirstItem = false;\n                        tr.append(tdItem);\n                        count++;\n                        if (count % 2 === 1) tr.addClass('colored');\n                    } else {\n                        var trSingle = $('<tr>');\n                        if (count % 2 === 1) trSingle.addClass('colored');\n                        trSingle.append(tdItem).appendTo(tbodyE);\n                    }\n                });\n            });\n\n            setElementAsMdl(tbodyE);\n        });\n    };\n\n    function createTd(title, groupName) {\n        return $('<td class=\"right-column mdl-list__item mdl-list__item--two-line mdl-pre-upgrade\">' + '<span class=\"mdl-list__item-primary-content mdl-pre-upgrade \">' + '<span>' + title + '</span>' + '<span class=\"mdl-list__item-sub-title mdl-pre-upgrade\">' + groupName + '</span>' + '</span>' + '</td>');\n    }\n\n    window.ScheduleParser = ScheduleParser;\n})();\n\n//todo モード別\n(function () {\n\n    var scheme = void 0,\n        schemePrev = void 0;\n    var snap = void 0,\n        snapPrev = void 0;\n    var recordCount = void 0;\n    var ratio = void 0;\n    var clonedMoment = void 0;\n    var prevMoment = void 0;\n    var regExp = new RegExp(DELIMITER, \"g\");\n    var spaceRow = generateTableBorder(\"table-space\");\n    var rangeDatas = {};\n    var eveDatas = {};\n    var cap = $('#date-cap');\n    var radioCap = $('#ratio-cap');\n\n    function SummeryParser() {\n        console.log('SummeryParser()');\n        clonedMoment = currentMoment.clone();\n        prevMoment = clonedMoment.clone().add('M', -1);\n        cap.empty();\n        radioCap.empty();\n        this.setSchemes();\n    }\n\n    SummeryParser.prototype.getSummeryDataAsync = function () {\n        var self = this;\n        defaultDatabase.ref(scheme).once('value').then(function (snapshot) {\n            if (!snapshot.exists()) {\n                //todo データがありません(右上のテーブルにも)\n                errNonData.css('display', \"block\");\n                $('#table-others').hide();\n                return;\n            }\n\n            errNonData.hide();\n            $('#table-others').css('display', \"block\");\n\n            snap = snapshot;\n            recordCount = snapshot.child('recordCount').val();\n            $('#date-bg-cap').html(recordCount + '日');\n            ratio = self.calcRatio(recordCount, clonedMoment);\n            $('#ratio-bg-cap').html(ratio + '%');\n\n            self.setAverageTable();\n\n            defaultDatabase.ref(schemePrev).once('value').then(function (snapshot) {\n                snapPrev = snapshot;\n                self.onGetPrevData();\n            });\n        });\n    };\n\n    SummeryParser.prototype.setSchemes = function () {\n        scheme = makeRefScheme(['analytics', query, clonedMoment.format('YYYYMM')]);\n        schemePrev = makeRefScheme(['analytics', query, prevMoment.format('YYYYMM')]);\n    };\n\n    SummeryParser.prototype.onGetPrevData = function () {\n        if (!snapPrev.exists()) {\n            console.log('データなし onGetPrevData');\n            //todo データがありません?\n            return;\n        }\n\n        var recordCountPrev = snapPrev.child('recordCount').val();\n        var diffCount = snapPrev.child('recordCount').val() - recordCount;\n        var symbol = diffCount < 0 ? '' : '+';\n        var html = '先月より' + symbol + diffCount + '日';\n        $('#date-cap').html(html);\n\n        var ratioPrev = this.calcRatio(recordCount, prevMoment);\n        var diffRatio = ratioPrev - ratio;\n        var symbol2 = diffRatio < 0 ? '' : '+';\n        var ratioHtml = '先月より' + symbol2 + diffRatio + '%';\n        $('#ratio-cap').html(ratioHtml);\n\n        this.setPrevCaption();\n    };\n\n    SummeryParser.prototype.calcRatio = function (recordCount, moment) {\n        return Math.floor(recordCount / moment.daysInMonth() * 100);\n    };\n\n    SummeryParser.prototype.setAverageTable = function () {\n\n        var rowCount = 0;\n        snap.child('rangeEve').forEach(function (snapshot) {\n\n            var rangeTitle = snapshot.key.replace(regExp, '  <i class=\"fas fa-angle-double-right color-orange\"></i>  ');\n            var startMinTotal = snapshot.child('startMin').val();\n            var endMinTotal = snapshot.child('endMin').val();\n            var count = snapshot.child('count').val();\n\n            var startMin = Math.floor(startMinTotal / count);\n            var startTime = min2TimeVal(startMin);\n            var endMin = Math.floor(endMinTotal / count);\n            var endTime = min2TimeVal(endMin);\n            var timeLen = roundWithDigit(Math.abs(startMin - endMin) / 60, 10);\n            rangeDatas[snapshot.key] = {};\n            rangeDatas[snapshot.key]['startMin'] = startMin;\n            rangeDatas[snapshot.key]['endMin'] = endMin;\n            rangeDatas[snapshot.key]['hourLen'] = timeLen;\n            rangeDatas[snapshot.key]['count'] = count;\n            var lenTime = timeLen + \"h\";\n\n            var dom = '<tr class=\"ave-digit\">' + '<td></td>' + '<td class=\"range-title\" rowspan=\"2\">' + rangeTitle + '</td>' + '<td class=\"range-title\">' + count + '回' + '</td>' + '<td class=\"ave-digit-td no-wrap\">' + startTime + '</td>' + '<td class=\"ave-digit-td ave-angle no-wrap\" rowspan=\"2\">' + '<i class=\"fas fa-angle-double-right fa-lg color-orange\"></i>' + '</td>' + '<td class=\"ave-digit-td no-wrap\">' + endTime + '</td>' + '<td class=\"ave-digit-td no-wrap\">' + lenTime + '</td>' + '<td></td>' + '</tr>';\n\n            var row1 = $(dom);\n            // row1.find('.fa-angle-double-right').css('color', colors[0]);\n            var caption = '<tr class=\"caption\">' + '<td></td>' + '<td class=\"no-wrap cap-count\" data-title=\"' + snapshot.key + '\"></td>' + '<td class=\"no-wrap cap-start\" data-title=\"' + snapshot.key + '\"></td>' + '<td class=\"no-wrap cap-end\" data-title=\"' + snapshot.key + '\"></td>' + '<td class=\"no-wrap cap-length\" data-title=\"' + snapshot.key + '\"></td>' + '<td></td>' + '</tr>';\n            var row2 = $(caption);\n            var space = spaceRow.clone(true);\n\n            if (rowCount % 2 === 1) {\n                space.addClass(\"back-orange\");\n                row1.addClass(\"back-orange\");\n                row2.addClass(\"back-orange\");\n            }\n\n            tbody.append(space).append(row1).append(row2).append(space.clone(true));\n\n            rowCount++;\n        });\n\n        snap.child('timeEve').forEach(function (snapshot) {\n            var rangeTitle = snapshot.key.replace(regExp, '  <i class=\"fas fa-angle-double-right color-orange\"></i>  ');\n            var min = snapshot.child('min').val();\n            var count = snapshot.child('count').val();\n            var hour = Math.floor(min / count);\n            var timeVal = min2TimeVal(hour);\n            eveDatas[snapshot.key] = {};\n            eveDatas[snapshot.key]['min'] = min;\n            eveDatas[snapshot.key]['count'] = count;\n\n            // var average = min2HHMM(getAverage(eveList[eveKey]));\n            var row = $('<tr class=\"ave-digit\">' + '<td></td>' + '<td class=\"range-title\" rowspan=\"2\">' + rangeTitle + '</td>' + '<td class=\"range-title\">' + count + '回' + '</td>' + '<td class=\"ave-digit-td no-wrap centering\" colspan=\"4\">' + timeVal + '</td>' + '<td></td>' + '</tr>' + '<tr class=\"caption\">' + '<td></td>' + '<td class=\"no-wrap cap-count\" data-title=\"' + snapshot.key + '\"></td>' + '<td class=\"no-wrap centering cap-time-eve\" colspan=\"4\" data-title=\"' + snapshot.key + '\"></td>' + '<td></td>' + '</tr>');\n\n            var space0 = spaceRow.clone(true);\n            var space1 = spaceRow.clone(true);\n            if (rowCount % 2 === 1) {\n                space0.addClass(\"back-orange\");\n                space1.addClass(\"back-orange\");\n                row.addClass(\"back-orange\");\n            }\n\n            tbody.append(space0).append(row).append(space1);\n\n            rowCount++;\n        });\n    };\n\n    SummeryParser.prototype.setPrevCaption = function () {\n        snapPrev.child('rangeEve').forEach(function (snapshot) {\n            if (!rangeDatas[snapshot.key])\n                //todo 前月データなしの時の表示\n                return;\n\n            var startMinTotal = snapshot.child('startMin').val();\n            var endMinTotal = snapshot.child('endMin').val();\n            var count = snapshot.child('count').val();\n\n            var startMin = Math.floor(startMinTotal / count);\n            var endMin = Math.floor(endMinTotal / count);\n            var specStartMin = rangeDatas[snapshot.key]['startMin'];\n            var specEndMin = rangeDatas[snapshot.key]['endMin'];\n            var diffLenTime = roundWithDigit(roundWithDigit(Math.abs(specStartMin - specEndMin) / 60, 10) - roundWithDigit(Math.abs(startMin - endMin) / 60, 10), 10); //ここ、なぜか四捨五入した数値を足し引きすると値がおかしくなる\n            var symbol = diffLenTime < 0 ? '' : '+';\n            var val = '先月より' + symbol + diffLenTime + 'h';\n            $('.cap-length[data-title=' + snapshot.key + ']').html(val);\n\n            var diffHourStart = roundWithDigit((specStartMin - startMin) / 60, 10);\n            var symbolStart = diffHourStart < 0 ? '' : '+';\n            var valStart = '先月より' + symbolStart + diffHourStart + 'h';\n            $('.cap-start[data-title=' + snapshot.key + ']').html(valStart);\n\n            var diffHourEnd = roundWithDigit((specEndMin - endMin) / 60, 10);\n            var symbolEnd = diffHourEnd < 0 ? '' : '+';\n            var valEnd = '先月より' + symbolEnd + diffHourEnd + 'h';\n            $('.cap-end[data-title=' + snapshot.key + ']').html(valEnd);\n\n            var diffCount = rangeDatas[snapshot.key]['count'] - count;\n            var symbolCount = diffCount < 0 ? '' : '+';\n            var valCount = '先月より' + symbolCount + diffCount + '回';\n            $('.cap-count[data-title=' + snapshot.key + ']').html(valCount);\n        });\n\n        snapPrev.child('timeEve').forEach(function (snapshot) {\n            if (!eveDatas[snapshot.key])\n                //todo 前月データなしの時の表示\n                return;\n\n            var min = snapshot.child('min').val();\n            var count = snapshot.child('count').val();\n            var hour = roundWithDigit(Math.floor(min / count), 10);\n            var diffHour = roundWithDigit(eveDatas[snapshot.key]['min'], 10) - hour;\n            var symbol = diffHour < 0 ? '' : '+';\n            var val = '先月より' + symbol + diffHour + 'h';\n            $('.cap-time-eve[data-title=' + snapshot.key + ']').html(val);\n\n            var diffCount = eveDatas[snapshot.key]['count'] - count;\n            var symbolCount = diffCount < 0 ? '' : '+';\n            var valCount = '先月より' + symbolCount + diffCount + '回';\n            $('.cap-count[data-title=' + snapshot.key + ']').html(valCount);\n        });\n    };\n\n    function min2TimeVal(min) {\n        // var min = Math.abs(minTotal / count);\n        if (min >= 60 * 24) {\n            min = min - 60 * 24;\n            return moment({\n                hour: Math.floor(min / 60),\n                minute: min % 60\n            }).format('HH:mm') + '(翌日)';\n        } else if (min <= 0) {\n            min = min + 60 * 24;\n            return moment({\n                hour: Math.floor(min / 60),\n                minute: min % 60\n            }).format('HH:mm') + '(前日)';\n        } else {\n            console.log(min % 60, Math.floor(min / 60));\n            return moment({\n                hour: Math.floor(min / 60),\n                minute: min % 60\n            }).format('HH:mm');\n        }\n    }\n\n    window.SummeryParser = SummeryParser;\n})();\n\nfunction showData(uid) {\n    var dates = void 0;\n    switch (displayMode) {\n        case MODE_WEEK:\n            dates = getDaysOfWeek(currentMoment);\n            break;\n        case MODE_MONTH:\n            dates = getDaysOfMonth(currentMoment);\n            break;\n    }\n\n    var getCount = 0;\n    console.log(dates);\n\n    dates.forEach(function (day) {\n        var node = \"usersParam/\" + uid + \"/\" + day;\n        defaultDatabase.ref(node).once('value').then(function (snapshot) {\n            if (!snapshot.exists()) {\n                masterJson[day] = null;\n            } else {\n                var masterData = [];\n                snapshot.forEach(function (arr) {\n                    arr = arr.toJSON();\n                    if (arr[\"dataType\"] === 2 || arr[\"dataType\"] === 3) {\n                        var newArr = [];\n                        Object.values(arr[\"data\"]).forEach(function (value) {\n                            newArr.push(value);\n                        });\n                        arr[\"data\"] = newArr;\n                    }\n                    masterData.push(arr);\n                });\n                masterJson[day] = masterData;\n            }\n\n            getCount++;\n\n            //最後のデータかどうかをチェック\n            if (getCount === dates.length) {\n                console.log(masterJson);\n                displayTest();\n            }\n        });\n    });\n}\n\nfunction resetUi() {\n    bgParam.html(\"\");\n    smParam.html(\"\");\n    bgParam.parent().next().html(\"\");\n    chartWrapper.children().remove();\n\n    $('<canvas>', {\n        id: 'chart_div'\n    }).appendTo(chartWrapper);\n    tbody.html(\"\");\n    myChart = null;\n    masterJson = {};\n}\n\nfunction displayTest() {\n    //dataType === 1のものを集計する。\n    var keys = Object.keys(masterJson);\n    var timeData = {};\n    setTitle(displayMode, keys[0]);\n    chart(displayMode, keys[0]);\n\n    keys.forEach(function (key) {\n        if (masterJson[key]) {\n            masterJson[key].forEach(function (data) {\n                if (data[\"dataType\"] === 1) {\n                    var json = JSON.parse(data[\"data\"][\"0\"]);\n                    console.log(json);\n                    timeData[key] = json;\n                    json.rangeList.forEach(function (entry) {\n                        var date = moment(key, \"YYYYMMDD\").date();\n\n                        var start = getTime(entry.start);\n                        var end = getTime(entry.end);\n                        var timeVal = getTimeVal(entry.start) + \" → \" + getTimeVal(entry.end);\n                        console.log(entry.start);\n                        var label = entry.start.name + \" → \" + entry.end.name;\n\n                        if (entry.start.offset === entry.end.offset) {\n\n                            pushData(getRangeArr(date, start, end, entry.start.offset), date, entry.colorNum, label, timeVal, true, true);\n                        } else if (entry.end.offset - entry.start.offset === 1) {\n\n                            date += entry.start.offset;\n                            pushData(getRangeStart(date, start), date, entry.colorNum, label, timeVal, true, false);\n                            date += 1;\n                            pushData(getRangeEnd(date, end), date, entry.colorNum, label, timeVal, false, true);\n                        } else if (entry.end.offset - entry.start.offset === 2) {\n\n                            date -= entry.start.offset;\n                            pushData(getRangeStart(date, start), date, entry.colorNum, label, timeVal, true, false);\n\n                            date += 1;\n                            var arrH = [];\n                            for (var i = 0; i <= 24; i++) {\n                                arrH.push(date);\n                            }\n\n                            pushData(arrH, date, false, false);\n\n                            date += 1;\n                            pushData(getRangeEnd(date, start), date, entry.colorNum, label, timeVal, false, true);\n                        }\n                    });\n\n                    json.eventList.forEach(function (entry) {\n                        var date = moment(key, \"YYYYMMDD\").date();\n\n                        var time = getTime(entry);\n                        var timeVal = getTimeVal(entry);\n                        pushData(getRangeArr(date, time, time, 0), date, entry.colorNum, entry.name, timeVal);\n                    });\n                }\n            });\n        }\n    });\n\n    // showAverage(timeData);\n\n    initTabLayout2();\n    // var table = $('#table-others');\n    // var tableWidth = table.css({ position: \"absolute\", visibility: \"hidden\", display: \"block\" });\n    // table.css({ position: \"\", visibility: \"\", display: \"\" });\n    // $('.mdl-mini-footer').css('min-width', tableWidth+1);\n\n    // innerProgress.css('display', \"none\");\n    progress.hide();\n    pageContent.css('display', 'block');\n    postLoad.css('display', 'block');\n\n    myChart.update();\n\n    headerBtnEnable = true;\n}\n\nfunction setTitle(mode, firstDate) {\n    console.log(firstDate);\n    var titleMonth = $('#chart_title_w_month');\n    var titleWeek = $('#chart_title_w');\n    var momentO = moment(firstDate.toString(), \"YYYYMMDD\");\n    switch (mode) {\n        case MODE_WEEK:\n            var start = momentO.format('MM.DD') + \"(\" + wodList[0] + \")\";\n            momentO.add(mode - 1, 'd');\n            var end = momentO.format('MM.DD') + \"(\" + wodList[MODE_WEEK - 1] + \")\";\n            console.log(end);\n            $('#chart_title_start').html(start);\n            $('#chart_title_end').html(end);\n            titleMonth.css('display', 'none');\n            titleWeek.css('display', 'inline');\n            break;\n        case MODE_MONTH:\n            titleMonth.html(momentO.month() + 1 + \"月\");\n            titleMonth.css('display', 'inline');\n            titleWeek.css('display', 'none');\n            break;\n    }\n}\n\nfunction chart(mode, firstKey) {\n    var maximum = getMaximumFromMode(mode);\n    var startCal = getStartCal(mode, firstKey);\n\n    // var dates = getDateYmds(mode, startCal, maximum);\n    var yAxis = getYaxis(mode, startCal, maximum);\n    // var fontColors = [];\n    // yAxis.forEach(function (value) {\n    //    if(value.indexOf('日')){\n    //        fontColors.push('#dd3734');\n    //    } else {\n    //        fontColors.push(null);\n    //    }\n    // });\n\n    var ctx = $('#chart_div');\n    switch (mode) {\n        case MODE_MONTH:\n            chartWrapper.css('height', 1000); //todo これはこれでいいのか？\n            break;\n        case MODE_WEEK:\n            chartWrapper.removeAttr('style');\n            break;\n    }\n\n    // var keys = Object.keys(masterJson);\n    myChart = new Chart(ctx[0].getContext(\"2d\"), {\n        type: 'line',\n        data: {\n            labels: makeXaxis(),\n            datasets: []\n        },\n        options: {\n            responsive: true,\n            maintainAspectRatio: mode !== MODE_MONTH,\n            scales: {\n                yAxes: [{\n                    ticks: {\n                        suggestedMin: 0,\n                        suggestedMax: maximum,\n                        reverse: true,\n                        stepSize: 1,\n                        // fontColor: fontColors,\n                        callback: function callback(value, index, values) {\n                            if (index === maximum) return null;\n\n                            return yAxis[value];\n                        }\n                    }\n                }],\n                xAxes: [{\n                    ticks: {\n                        callback: function callback(value, index, values) {\n                            if (value) return value;\n                        },\n                        autoSkip: true,\n                        maxRotation: 0,\n                        minRotation: 0\n                    },\n                    display: true\n                }]\n            },\n            legend: {\n                display: false\n            },\n            tooltips: {\n                callbacks: {\n                    intersect: false,\n                    mode: 'point',\n                    title: function title(toolTips, data) {\n                        console.log(toolTips, data);\n                        return yAxis[toolTips[0][\"yLabel\"]];\n                    },\n                    label: function label(tooltipItem, data) {\n                        var arr = data[\"datasets\"][tooltipItem.datasetIndex];\n                        return arr.label + \" \" + arr.timeVal;\n                    }\n                }\n            }\n        }\n    });\n}\n\nfunction getStartCal(mode, firstKey) {\n    var cal = moment(firstKey, 'YYYYMMDD');\n    if (mode === MODE_MONTH) {\n        cal = cal.startOf('month');\n        console.log(\"getStartCal\", \"こっち\");\n    }\n    return cal;\n}\n\nfunction getYaxis(mode, firstCal, maximum) {\n    var cal = moment(firstCal);\n    var yAxis = [];\n    var month = null;\n    for (var i = 0; i < maximum; i++) {\n        var value = void 0;\n        if (mode === MODE_WEEK && (i === 0 || cal.month() !== month)) {\n            month = cal.month();\n            value = cal.format('MM/DD');\n        } else {\n            value = cal.format('DD');\n        }\n        yAxis.push(value + \"(\" + wodList[cal.day()] + \")\");\n        cal.add(1, 'd');\n    }\n\n    return yAxis;\n}\n\nfunction getMaximumFromMode(mode) {\n    switch (mode) {\n        case MODE_WEEK:\n            return 7;\n        case MODE_MONTH:\n            return currentMoment.endOf('month').date();\n    }\n}\n\n/*---------------描画まわり-------------*/\nfunction makeXaxis() {\n    var arr = [];\n    var limit = 24 * 4;\n    for (var i = 0; i <= limit; i++) {\n        if (i === 0) {\n            arr.push(i);\n        } else if (i % 8 === 0) {\n            arr.push(i / 4);\n        } else {\n            arr.push(null);\n        }\n    }\n    return arr;\n}\n\nfunction getTime(entryC) {\n    var hour = entryC.cal.hourOfDay;\n    var min = entryC.cal.minute;\n    return hour + min / 60;\n}\n\nfunction getTimeVal(entryC) {\n    var hour = entryC.cal.hourOfDay;\n    var min = entryC.cal.minute;\n    var time = moment();\n    time.hour(hour);\n    time.minute(min);\n    return time.format('HH:mm');\n}\n\nfunction pushData(arr, date, colorNum, label, timeVal, showStartRadius, showEndRadius) {\n    var color = colors[colorNum];\n    var radiuses = setRadius(arr, date - 1, showStartRadius, showEndRadius); //ここで-1をするのは、日付は1始まりだから\n    myChart.data.datasets.push({\n        data: arr,\n        label: label,\n        pointRadius: radiuses,\n        pointHoverRadius: radiuses,\n        backgroundColor: color,\n        pointHoverBackgroundColor: color,\n        borderColor: color,\n        fill: false,\n        timeVal: timeVal\n    });\n}\n\nfunction setRadius(dataArr, date, showStartRadius, showEndRadius) {\n    var start = dataArr.indexOf(date);\n    var end = dataArr.lastIndexOf(date);\n    console.log(start + \", \" + end);\n    var radiusArr = [];\n    for (var i = 0; i < dataArr.length; i++) {\n        if (showStartRadius && i === start || showEndRadius && i === end) {\n            radiusArr.push(5);\n        } else {\n            radiusArr.push(0);\n        }\n    }\n    return radiusArr;\n}\n\nfunction getRangeArr(date, start, end, offset) {\n    var arrC = [];\n    date = date + offset - 1; //ここで-1をするのは、日付は1始まりだから\n    var limit = 24 * 4;\n    for (var n = 0; n <= limit; n++) {\n        if (start * 4 <= n && n < end * 4 + 1) {\n            arrC.push(date);\n        } else {\n            arrC.push(null);\n        }\n    }\n    return arrC;\n}\n\nfunction getRangeStart(date, start) {\n    var dateC = date - 1; //ここで-1をするのは、日付は1始まりだから\n    var arrD = [];\n    for (var n = 0; n <= 24 * 4; n++) {\n        if (start * 4 < n) {\n            arrD.push(dateC);\n        } else {\n            arrD.push(null);\n        }\n    }\n    return arrD;\n}\n\nfunction getRangeEnd(date, end) {\n    var dateC = date - 1; //ここで-1をするのは、日付は1始まりだから\n    var arrE = [];\n    for (var n = 0; n <= 24 * 4; n++) {\n        if (n <= end * 4) {\n            arrE.push(dateC);\n        } else {\n            arrE.push(null);\n        }\n    }\n    console.log(arrE);\n    return arrE;\n}\n/*---------------描画まわりここまで-------------*/\n\n/*---------------分析画面系ここから-------------*/\n// function showAverage(timeData) {\n//    var ranges = generateAveArr(timeData);\n//    var count = 0;\n//    for(var key in ranges){\n//        if(ranges.hasOwnProperty(key)){\n//            var aveStart = getAverage(ranges[key][\"start\"]);\n//            var aveEnd = getAverage(ranges[key][\"end\"]);\n//            var aveLen = roundWithDigit(Math.abs(aveStart - aveEnd)/60, 10) + \"h\";\n//            //DOMを挿入\n//            var dom =\n//                '<tr class=\"ave-digit\">' +\n//                    '<td class=\"range-title\" rowspan=\"2\">'+ key +'</td>' +\n//                    '<td class=\"ave-digit-td no-wrap\">'+ min2HHMM(aveStart)+'</td>' +\n//                    '<td class=\"ave-digit-td ave-angle no-wrap\" rowspan=\"2\">' +\n//                         '<i class=\"fas fa-angle-double-right fa-lg color-orange\"></i>' +\n//                    '</td>' +\n//                    '<td class=\"ave-digit-td no-wrap\">'+ min2HHMM(aveEnd) +'</td>' +\n//                    '<td class=\"ave-digit-td no-wrap\">'+ aveLen +'</td>' +\n//                '</tr>';\n//            var row1 = $(dom);\n//            row1.find('.fa-angle-double-right').css('color', colors[ranges[key]['colorNum']]);\n//            var caption =\n//                '<tr class=\"caption\">' +\n//                    '<td class=\"no-wrap\">先週より+2h15min</td>' +\n//                    '<td class=\"no-wrap\">先週より-45min</td>' +\n//                    '<td class=\"no-wrap\">先週より+2h15min</td>' +\n//                '</tr>';\n//            var row2 = $(caption);\n//            var space = generateTableBorder(\"table-space\");\n//            if(count %2 === 1){\n//                space.addClass(\"back-orange\");\n//                row1.addClass(\"back-orange\");\n//                row2.addClass(\"back-orange\");\n//                // row1.find('i').addClass(\"color-orange\");\n//            // } else {\n//            //     row1.find('i').addClass(\"color-disable\");\n//            }\n//            // var seem = generateTableBorder(\"table-seem\");\n//            tbody.append(space)\n//                .append(row1)\n//                .append(row2)\n//                .append(space.clone(true));\n//\n//            count++;\n//        }\n//    }\n//\n//    var eveList = generateAveArrEve(timeData);\n//    for(var eveKey in eveList){\n//        if(eveList.hasOwnProperty(eveKey)){\n//            var average = min2HHMM(getAverage(eveList[eveKey]));\n//            var row = $(\n//                '<tr class=\"ave-digit\">'+\n//                    '<td class=\"range-title\" rowspan=\"2\">'+ eveKey +'</td>'+\n//                    '<td class=\"ave-digit-td no-wrap centering\" colspan=\"4\">'+ average +'</td>'+\n//                '</tr>'+\n//                '<tr class=\"caption\">'+\n//                     '<td class=\"no-wrap centering\" colspan=\"4\">先週より+2h15min</td>'+\n//                '</tr>');\n//\n//            var space0 = space.clone(true);\n//            var space1 = space.clone(true);\n//            if(count %2 === 1){\n//                space0.addClass(\"back-orange\");\n//                space1.addClass(\"back-orange\");\n//                row.addClass(\"back-orange\");\n//            }\n//\n//            tbody.append(space0)\n//                .append(row)\n//                .append(space1);\n//\n//            count++;\n//        }\n//    }\n//\n//    //データが皆無であればその旨を表示\n//     var tableOhters = $('#table-others');\n//     if(count === 0){\n//         errNonData.css('display', \"block\");\n//         tableOhters.css('display', \"none\");\n//     } else {\n//         errNonData.css('display', \"none\");\n//         tableOhters.css('display', \"block\");\n//     }\n//\n// }\n\n// function generateAveArr(timeData) {\n//     var ranges = {};\n//     for(var key in timeData){\n//         if(timeData.hasOwnProperty(key)){\n//             timeData[key][\"rangeList\"].forEach(function (range) {\n//                 var name = range.start.name + '  <i class=\"fas fa-angle-double-right color-orange\"></i>  ' + range.end.name;\n//                 if(!ranges.hasOwnProperty(name)){\n//                     ranges[name] = {};\n//                     ranges[name].start = [];\n//                     ranges[name].end = [];\n//                 }\n//                 var startTime = range.start.cal.hourOfDay *60 + range.start.cal.minute + range.end.offset *24*60;\n//                 var endTime = range.end.cal.hourOfDay *60 + range.end.cal.minute + range.end.offset *24*60;\n//                 ranges[name].start.push(startTime);\n//                 ranges[name].end.push(endTime);\n//             });\n//         }\n//     }\n//     return ranges;\n// }\n//\n// function generateAveArrEve(timeData) {\n//     var eves = {};\n//     for(var key in timeData){\n//         if(timeData.hasOwnProperty(key)){\n//             timeData[key][\"eventList\"].forEach(function (event) {\n//                 if(!eves.hasOwnProperty(event.name)){\n//                     eves[event.name] = [];\n//                 }\n//                 eves[event.name].push(event.cal.hourOfDay *60 + event.cal.minute);\n//             });\n//         }\n//     }\n//     return eves;\n// }\n//\n// function getAverage(arr) {\n//     var sum = 0;\n//     arr.forEach(function (time) {\n//         sum += time;\n//     });\n//     if(sum){\n//         var aveStart = sum / (arr.length);\n//         sum = Math.round(aveStart);\n//     }\n//     return sum;\n// }\n\nfunction roundWithDigit(num, digit) {\n    return Math.round(num * digit) / digit;\n}\n\n// function min2HHMM(min) {\n//     var m = moment();\n//     m.minute(min);\n//     return m.format('HH:mm');\n// }\n\nfunction generateTableBorder(className) {\n    var td = $('<td>', {\n        class: className,\n        colspan: 8\n    });\n    return $('<tr>').append(td);\n}\n\n/*-----------------------tabLayout2--------------------------*/\nfunction initTabLayout2() {\n    var bgColumns = [];\n    var smColumns = {};\n    $('<td>', { rowspan: 2 }).html('日にち').appendTo(bgParam);\n    for (var key in masterJson) {\n        if (masterJson.hasOwnProperty(key) && masterJson[key]) {\n            masterJson[key].forEach(function (data) {\n                switch (data.dataType) {\n                    case 2:\n                        // addBgColumn(bgColumns, bgParam, data);\n                        // addSmColumn(smColumns, smParam, data, 0);\n                        addNormalColumn(bgColumns, bgParam, data);\n                        break;\n                    case 3:\n                        addBgColumn(bgColumns, bgParam, data);\n                        addSmColumn(smColumns, smParam, data, 1);\n                        break;\n                    case 4:\n                        addNormalColumn(bgColumns, bgParam, data);\n                        break;\n                }\n            });\n        }\n    }\n\n    fixBgColumnSpan(bgParam, smColumns);\n\n    addRowsToTable(smParam, bgParam, bgColumns, smColumns);\n}\n\n/*----------------thead系--------------*/\nfunction addNormalColumn(bgColumns, bgParam, data) {\n    if (bgColumns.indexOf(data.dataName) === -1) {\n        $('<td>', {\n            rowspan: 2\n        }).html(data.dataName).appendTo(bgParam);\n        bgColumns.push(data.dataName);\n    }\n}\n\nfunction addBgColumn(bgColumns, bgParam, data) {\n    if (bgColumns.indexOf(data.dataName) === -1) {\n        $('<td>').html(data.dataName).appendTo(bgParam);\n        bgColumns.push(data.dataName);\n    }\n}\n\nfunction addSmColumn(smColumns, smParam, data, valuePos) {\n    data.data.forEach(function (value) {\n        var html = value.split(DELIMITER)[valuePos];\n        if (!smColumns[data.dataName]) {\n            smColumns[data.dataName] = [];\n        }\n        if (smColumns[data.dataName].indexOf(html) === -1) {\n            $('<td>').html(html).appendTo(smParam);\n            if (smColumns) smColumns[data.dataName].push(html);\n        }\n    });\n}\n\nfunction fixBgColumnSpan(bgParam, smColumns) {\n    for (var key in smColumns) {\n        if (smColumns.hasOwnProperty(key)) {\n            bgParam.find(\"td:contains(\" + key + \")\").attr('colspan', smColumns[key].length);\n        }\n    }\n}\n\n/*----------------------tbody系-----------------------*/\nfunction addRowsToTable(smParam, bgParam, bgColumns, smColumns) {\n\n    var smVals = Object.values(smColumns);\n    var tbody = $('#table-others').find('tbody');\n    var totalLen = 0;\n    var smColumnVals = Object.values(smColumns);\n    var smColumnKeys = Object.keys(smColumns);\n    smColumnVals.forEach(function (arr) {\n        totalLen += arr.length;\n    });\n    var len = bgColumns.length + totalLen - smColumnVals.length + 1; //+1は日付の分\n\n    var masterKeys = Object.keys(masterJson);\n\n    var _loop = function _loop(k) {\n\n        var tr = $('<tr>');\n        if (k % 2) {\n            tr.css('background-color', \"#f9f9f7\");\n        }\n\n        for (var i = 0; i < len; i++) {\n            td = $('<td>');\n\n            tr.append(td);\n            if (i === 0) {\n                td.addClass('row-head');\n            }\n        }\n        var cal = moment(masterKeys[k], \"YYYYMMDD\");\n        var date = cal.date();\n        var title = date + \"日(\" + wodList[cal.day()] + \")\";\n        var rowHead = tr.find('td').eq(0);\n        rowHead.html(title);\n        //日曜日であれば赤色に\n        if (cal.day() === 0) {\n            rowHead.addClass('holiday');\n        }\n\n        //休日であれば赤色にしてtippy表示\n        var holidayKey = cal.format(\"YYYY-MM-DD\");\n        var holidayPos = Object.keys(HOLIDAYS).indexOf(holidayKey);\n        if (holidayPos !== -1) {\n            rowHead.attr('title', HOLIDAYS[holidayKey]);\n            rowHead.addClass('holiday');\n        }\n\n        if (masterJson[masterKeys[k]]) {\n            masterJson[masterKeys[k]].forEach(function (data) {\n                if (!data.data || data.dataType === 0 || data.dataType === 1) return;\n\n                var count = bgColumns.indexOf(data.dataName);\n                var keyLen = smColumnKeys.indexOf(data.dataName);\n                count -= keyLen;\n                for (var n = 0; n < keyLen; n++) {\n                    count += smColumnVals[n].length;\n                }\n                // count++;//日付カラムの分\n                // console.log(data.dataName + \"は\" + count + \"の並びにあります\");\n\n                switch (data.dataType) {\n                    case 2:\n                        var td0 = tr.find('td').eq(count);\n                        var titleVal = data.dataName + \" \" + title;\n                        setTagInCell(td0, data, titleVal);\n                        break;\n                    case 3:\n                        for (var m = 0; m < data.data.length; m++) {\n                            var pos = count + m + 1;\n                            var vals = data.data[m].split(DELIMITER);\n                            var tdE = tr.find('td').eq(pos);\n                            var titleValE = data.dataName + \" : \" + vals[1] + \" \" + title;\n                            if (vals[0] === \"0\") {\n                                var span = $('<span>', {\n                                    title: titleValE\n                                });\n                                if (vals[2] === \"true\") {\n                                    span.html('<i class=\"fas fa-check color-orange\"></i>').appendTo(tdE);\n                                } else if (vals[2] === \"false\") {\n                                    span.html('<i class=\"fas fa-times color-disable\"></i>').appendTo(tdE);\n                                }\n                            } else if (vals[0] === \"1\") {\n                                $('<span>', {\n                                    title: titleValE\n                                }).html(vals[2]).appendTo(tdE);\n                            }\n                        }\n                        break;\n                    case 4:\n                        // todo 本来は\"comment\"ノードに格納されているので、実装後この点を修正すること\n                        var _td = tr.find('td').eq(count);\n                        if (data.data.length > 100) {\n                            // todo ここら辺の改行とかの動作、もうちょっとうまくやれるはず\n                            var value = null;\n                            if (data.data.indexOf(\"\\n\") === data.data.lastIndexOf(\"\\n\")) {\n                                //改行が2箇所以上ある場合\n                                value = data.data.substring(0, 80) + \"...\";\n                            } else {\n                                var first = data.data.indexOf(\"\\n\");\n                                var second = data.data.substring(first).indexOf(\"\\n\");\n                                value = data.data.substring(0, second);\n                            }\n                            value = value.replace(/(?:\\r\\n|\\r|\\n)/g, '<br />');\n                            _td.attr(\"full-txt\", data.data);\n                            _td.html(value);\n                            var dropDownBtn = $('<i>', {\n                                class: \"fas fa-caret-down fa-lg color-orange\",\n                                onclick: \"expandText(this)\",\n                                title: data.dataName + \" \" + title\n                            });\n                            _td.append($('<br />')).append(dropDownBtn);\n                        } else {\n                            _td.html(data.data);\n                        }\n                        break;\n                }\n            });\n        }\n\n        tbody.append(tr);\n    };\n\n    for (var k = 0; k < masterKeys.length; k++) {\n        var td;\n\n        _loop(k);\n    }\n\n    setElementAsMdl(tbody);\n\n    tippy('[title]', {\n        updateDuration: 0,\n        popperOptions: {\n            modifiers: {\n                preventOverflow: {\n                    enabled: false\n                }\n            }\n        }\n    });\n}\n\nfunction setTagInCell(td, data, title) {\n    for (var m = 0; m < data.data.length; m++) {\n        var vals = data.data[m].split(DELIMITER);\n        if (vals[2] === \"true\") continue;\n\n        var color = highlightColors[parseInt(vals[1])];\n        var chipsHtml = $('<span class=\"mdl-chip mdl-pre-upgrade\" style=\"background-color: ' + color + '\" title=\"' + title + '\">' + '<span class=\"mdl-chip__text\">' + vals[0] + '</span>' + '</span>');\n        td.append(chipsHtml);\n    }\n}\n\n//todo アニメーションつけられると尚良し\nfunction expandText(ele) {\n    console.log(\"expandText called\");\n    var td = $(ele).closest('td');\n    var txt = td.attr(\"full-txt\");\n    txt = txt.replace(/(?:\\r\\n|\\r|\\n)/g, '<br />');\n    td.html(txt);\n}\n\nfunction setElementAsMdl(clone) {\n    var ele = clone.find(\".mdl-pre-upgrade\");\n    for (var i = 0; i < ele.length; i++) {\n        componentHandler.upgradeElement(ele.eq(i)[0]);\n    }\n}\n//# sourceMappingURL=app.js.map"]}