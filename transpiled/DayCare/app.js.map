{"version":3,"sources":["../../daycare/app.js"],"names":["defaultDatabase","masterJson","myChart","MODE_WEEK","MODE_MONTH","displayMode","menuMon","$","menuWeek","currentMoment","moment","bgParam","smParam","tbody","eq","find","chartWrapper","errNonData","postLoad","headerBtnEnable","progress","pageContent","query","window","onload","init","defaultApp","firebase","initializeApp","CONFIG","database","hide","onLoginSuccess","initDrawerDecoration","setDisplayMode","mode","attr","getDaysOfWeek","now","dayOfWeek","day","add","days","i","push","format","getDaysOfMonth","start","startOf","end","endOf","date","css","on","e","removeAttr","restUi","showData","ScheduleParser","getScheduleAsync","SummeryParser","getSummeryDataAsync","ev","console","log","prototype","scheme","makeRefScheme","empty","ref","once","then","snapshot","exists","specMoment","key","count","forEach","childSnap","htmlE","wodList","tr","td","rowspan","numChildren","class","html","append","appendTo","isFirstItem","schSnap","title","child","val","groupName","colorVal","tdItem","createTd","colors","parseInt","addClass","trSingle","setElementAsMdl","schemePrev","snap","snapPrev","recordCount","ratio","clonedMoment","prevMoment","regExp","RegExp","DELIMITER","spaceRow","generateTableBorder","rangeDatas","eveDatas","clone","setSchemes","self","calcRatio","setAverageTable","onGetPrevData","recordCountPrev","diffCount","symbol","ratioPrev","diffRatio","symbol2","ratioHtml","setPrevCaption","Math","floor","daysInMonth","rowCount","rangeTitle","replace","startMinTotal","endMinTotal","startMin","startTime","min2TimeVal","endMin","endTime","timeLen","roundWithDigit","abs","lenTime","dom","row1","caption","row2","space","min","hour","timeVal","row","space0","space1","specStartMin","specEndMin","diffLenTime","diffHourStart","symbolStart","valStart","diffHourEnd","symbolEnd","valEnd","symbolCount","valCount","diffHour","minute","uid","dates","getCount","node","masterData","arr","toJSON","newArr","Object","values","value","length","displayTest","parent","next","children","remove","id","keys","timeData","setTitle","chart","data","json","JSON","parse","rangeList","entry","getTime","getTimeVal","label","name","offset","pushData","getRangeArr","colorNum","getRangeStart","getRangeEnd","arrH","eventList","time","initTabLayout2","update","firstDate","titleMonth","titleWeek","momentO","toString","month","firstKey","maximum","getMaximumFromMode","startCal","getStartCal","yAxis","getYaxis","ctx","Chart","getContext","type","labels","makeXaxis","datasets","options","responsive","maintainAspectRatio","scales","yAxes","ticks","suggestedMin","suggestedMax","reverse","stepSize","callback","index","xAxes","autoSkip","maxRotation","minRotation","display","legend","tooltips","callbacks","intersect","toolTips","tooltipItem","datasetIndex","cal","firstCal","limit","entryC","hourOfDay","showStartRadius","showEndRadius","color","radiuses","setRadius","pointRadius","pointHoverRadius","backgroundColor","pointHoverBackgroundColor","borderColor","fill","dataArr","indexOf","lastIndexOf","radiusArr","arrC","n","arrD","arrE","num","digit","round","className","colspan","bgColumns","smColumns","hasOwnProperty","dataType","addNormalColumn","addBgColumn","addSmColumn","fixBgColumnSpan","addRowsToTable","dataName","valuePos","split","smVals","totalLen","smColumnVals","smColumnKeys","len","masterKeys","k","rowHead","holidayKey","holidayPos","HOLIDAYS","keyLen","td0","titleVal","setTagInCell","m","pos","vals","tdE","titleValE","span","substring","first","second","dropDownBtn","onclick","tippy","updateDuration","popperOptions","modifiers","preventOverflow","enabled","highlightColors","chipsHtml","expandText","ele","closest","txt","componentHandler","upgradeElement"],"mappings":"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ACvB,YAAIA,KAAKvO,MAAI,CAAb,EAAe;AACXyO,iBAAK9O,IAAL,CAAUO,IAAV;AACH,SAFD,MAEO;AACHuO,iBAAK9O,IAAL,CAAU,IAAV;AACH;AACJ;AACDmB,YAAQC,GAAR,CAAY0N,IAAZ;AACA,WAAOA,IAAP;AACH;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASzI,cAAT,CAAwB0I,GAAxB,EAA6BC,KAA7B,EAAoC;AAChC,WAAOzJ,KAAK0J,KAAL,CAAWF,MAAIC,KAAf,IAAsBA,KAA7B;AACH;;AAED;AACA;AACA;AACA;AACA;;AAEA,SAAS1K,mBAAT,CAA6B4K,SAA7B,EAAwC;AACpC,QAAM5M,KAAM3E,EAAE,MAAF,EAAU;AAClB8E,eAAOyM,SADW;AAElBC,iBAAS;AAFS,KAAV,CAAZ;AAIA,WAAOxR,EAAE,MAAF,EAAUgF,MAAV,CAAiBL,EAAjB,CAAP;AACH;;AAED;AACA,SAASmI,cAAT,GAA0B;AAC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","file":"app.js","sourcesContent":["\"use strict\";\n\nlet defaultDatabase;\nlet masterJson = {};\nlet myChart;\nconst MODE_WEEK = 7;\nconst MODE_MONTH = 0;\nlet displayMode;\nlet menuMon = $('#dpdn-month');\nlet menuWeek = $('#dpdn-week');\nlet currentMoment = moment();\nconst bgParam = $('#bg-param');\nconst smParam = $('#sm-param');\nconst tbody = $(\".chart-ave\").eq(0).find('tbody');\nconst chartWrapper = $('#chart_w');\nconst errNonData = $('.err-non-data');\n\n/*---------loading系------*/\nconst postLoad = $('#post_load');\nlet headerBtnEnable = false;//これがfalseのとき、ヘッダボタンを押しても動作させない。\nconst progress = $('#progress');\nconst pageContent = $('.page-content');\n// var innerProgress =$('.inner-progress');\nconst query = \"1JLRZXEkNuPSzC1iIWrJFmPd9ry2\";\n\n\nwindow.onload = function init() {\n\n    const defaultApp = firebase.initializeApp(CONFIG);\n    defaultDatabase = defaultApp.database();\n    progress.hide();\n    $('#login_w').hide();\n    onLoginSuccess();\n    initDrawerDecoration();\n};\n\nfunction setDisplayMode(mode) {\n    switch (mode){\n        case MODE_WEEK:\n            menuWeek.attr('disabled', '');\n            break;\n        case MODE_MONTH:\n            menuMon.attr('disabled', '');\n            break;\n    }\n    displayMode = mode;\n}\n\nfunction getDaysOfWeek() {\n    const now = moment(currentMoment);\n    let dayOfWeek = now.day();\n    now.add( -dayOfWeek, 'd');\n    const days = [];\n    for(let i=0; i<7; i++){\n        days.push(now.format('YYYYMMDD'));\n        now.add(1, 'd');\n    }\n    return days;\n}\n\nfunction getDaysOfMonth() {\n    const now = moment(currentMoment);\n    const start = moment(now).startOf('month');\n    const end = now.endOf('month').date();\n    const days = [];\n    for(let i=0; i<end; i++){\n        days.push(start.format('YYYYMMDD'));\n        start.add(1, 'd');\n    }\n    return days;\n}\n\nfunction onLoginSuccess() {\n    $('.mdl-layout__drawer-button').css('visibility', 'hidden');\n    $('.third-card').hide();\n\n    if(!displayMode){\n        menuWeek.on('click', function (e) {\n            if(displayMode !== MODE_WEEK && headerBtnEnable){\n                headerBtnEnable = false;\n                displayMode = MODE_WEEK;\n                $(this).attr('disabled', '');\n                menuMon.removeAttr('disabled');\n                setDisplayMode(MODE_WEEK);\n\n                pageContent.hide();\n                // innerProgress.css('display', \"inline\");\n                restUi();\n                showData(query);\n                new ScheduleParser().getScheduleAsync();\n                new SummeryParser().getSummeryDataAsync();\n            }\n            return false;\n        });\n\n        menuMon.on('click', function (e) {\n            if(displayMode !== MODE_MONTH && headerBtnEnable){\n                headerBtnEnable = false;\n                displayMode = MODE_MONTH;\n                $(this).attr('disabled', '');\n                menuWeek.removeAttr('disabled');\n                setDisplayMode(MODE_MONTH);\n\n                pageContent.hide();\n                // innerProgress.css('display', \"inline\");\n                restUi();\n                showData(query);\n                new ScheduleParser().getScheduleAsync();\n                new SummeryParser().getSummeryDataAsync();\n            }\n            return false;\n        });\n\n        $('#prev_btn').on({\"click\": function (ev) {\n            if(!headerBtnEnable)\n                return false;\n\n            switch (displayMode){\n                case MODE_WEEK:\n                    currentMoment.add(-7, 'd');\n                    break;\n                case MODE_MONTH:\n                    currentMoment.add(-1, 'M');\n                    break;\n            }\n\n            pageContent.hide();\n            // innerProgress.css('display', \"inline\");\n            restUi();\n            showData(query);\n            new ScheduleParser().getScheduleAsync();\n            new SummeryParser().getSummeryDataAsync();\n\n            return false;\n        }});\n\n        $('#next_btn').on({\"click\": function (ev) {\n            if(!headerBtnEnable)\n                return false;\n\n            switch (displayMode){\n                case MODE_WEEK:\n                    currentMoment.add(7, 'd');\n                    break;\n                case MODE_MONTH:\n                    currentMoment.add(1, 'M');\n                    break;\n            }\n\n            pageContent.css('display', 'none');\n            // innerProgress.css('display', \"inline\");\n            restUi();\n            showData(query);\n            new ScheduleParser().getScheduleAsync();\n            new SummeryParser().getSummeryDataAsync();\n\n            return false;\n        }});\n    }\n\n    setDisplayMode(MODE_MONTH);\n\n    showData(query);\n\n    new SummeryParser().getSummeryDataAsync();\n}\n\n//todo モード別\n(function () {\n\n    const tbody = $('#third-card tbody');\n\n    // var userDataSnap, scheduleSnap;\n\n    function ScheduleParser() {\n        console.log('ScheduleParser()');\n    }\n\n    ScheduleParser.prototype.getScheduleAsync = function () {\n        const scheme = makeRefScheme(['combinedCalendar', query, currentMoment.format('YYYYMM')]);\n        tbody.empty();\n\n        defaultDatabase.ref(scheme).once('value').then(function (snapshot) {\n            if (!snapshot.exists()) {\n                //todo スケジュールがありません\n                return;\n            }\n\n            const specMoment = moment(snapshot.key, 'YYYYMM');\n\n            let count = 1;\n            snapshot.forEach(function (childSnap) {\n                const date = childSnap.key;\n                specMoment.date(date);\n                const htmlE = date + '(' + wodList[specMoment.day()] + ')';\n                const tr = $('<tr>');\n                const td = $('<td>', {\n                    rowspan: childSnap.numChildren(),\n                    class: 'left-column'\n                }).html(htmlE);\n                tr.append(td).appendTo(tbody);\n\n                let isFirstItem = true;\n                childSnap.forEach(function (schSnap) {\n                    // $('<tr><td class=\"seem\" colspan=\"2\"></td></tr>').appendTo(tbody);\n                    const title = schSnap.child('title').val();\n                    const groupName = schSnap.child('groupName').val();\n                    const colorVal = schSnap.child('colorNum').val();\n                    const tdItem = createTd(title, groupName);\n                    tdItem.find('.mdl-list__item-primary-content').css('border-left-color', colors[parseInt(colorVal)]);\n                    if (isFirstItem) {\n                        isFirstItem = false;\n                        tr.append(tdItem);\n                        count++;\n                        if (count%2 === 1)\n                            tr.addClass('colored');\n                    } else {\n                        const trSingle = $('<tr>');\n                        if (count%2 === 1)\n                            trSingle.addClass('colored');\n                        trSingle.append(tdItem).appendTo(tbody);\n                    }\n                });\n            });\n\n            setElementAsMdl(tbody);\n        });\n    };\n\n    function createTd(title, groupName) {\n        return $('<td class=\"right-column mdl-list__item mdl-list__item--two-line mdl-pre-upgrade\">'+\n            '<span class=\"mdl-list__item-primary-content mdl-pre-upgrade \">'+\n                '<span>'+ title +'</span>'+\n                '<span class=\"mdl-list__item-sub-title mdl-pre-upgrade\">'+ groupName +'</span>'+\n            '</span>'+\n        '</td>');\n    }\n\n    window.ScheduleParser = ScheduleParser;\n}());\n\n//todo モード別\n(function () {\n\n    let scheme, schemePrev;\n    let snap, snapPrev;\n    let recordCount;\n    let ratio;\n    let clonedMoment;\n    let prevMoment;\n    const regExp = new RegExp(DELIMITER, \"g\");\n    const spaceRow = generateTableBorder(\"table-space\");\n    const rangeDatas = {};\n    const eveDatas = {};\n\n    function SummeryParser() {\n        console.log('SummeryParser()');\n        clonedMoment = currentMoment.clone();\n        prevMoment = clonedMoment.clone().add('M', -1);\n        this.setSchemes();\n    }\n\n    SummeryParser.prototype.getSummeryDataAsync = function () {\n        const self = this;\n        defaultDatabase.ref(scheme).once('value').then(function (snapshot) {\n            if (!snapshot.exists()) {\n                //todo データがありません(右上のテーブルにも)\n                errNonData.css('display', \"block\");\n                $('#table-others').hide();\n                return;\n            }\n\n            errNonData.hide();\n            $('#table-others').css('display', \"block\");\n\n            snap = snapshot;\n            recordCount = snapshot.child('recordCount').val();\n            $('#date-bg-cap').html(recordCount +'日');\n            ratio = self.calcRatio(recordCount, clonedMoment);\n            $('#ratio-bg-cap').html(ratio +'%');\n\n            self.setAverageTable();\n\n            defaultDatabase.ref(schemePrev).once('value').then(function (snapshot) {\n                snapPrev = snapshot;\n                self.onGetPrevData();\n            });\n        });\n    };\n\n    SummeryParser.prototype.setSchemes = function () {\n        scheme = makeRefScheme(['analytics', query, clonedMoment.format('YYYYMM')]);\n        schemePrev = makeRefScheme(['analytics', query, prevMoment.format('YYYYMM')]);\n    };\n\n    SummeryParser.prototype.onGetPrevData = function () {\n        if (!snapPrev.exists()) {\n            console.log('データなし onGetPrevData');\n            //todo データがありません?\n            return;\n        }\n\n        const recordCountPrev = snapPrev.child('recordCount').val();\n        const diffCount = snapPrev.child('recordCount').val() - recordCount;\n        const symbol = diffCount < 0 ? '' : '+';\n        const html = '先月より' + symbol + diffCount + '日';\n        $('#date-cap').html(html);\n\n        const ratioPrev = this.calcRatio(recordCount, prevMoment);\n        const diffRatio = ratioPrev - ratio;\n        const symbol2 = diffRatio < 0 ? '' : '+';\n        const ratioHtml = '先月より' + symbol2 + diffRatio + '%';\n        $('#ratio-cap').html(ratioHtml);\n\n        this.setPrevCaption();\n    };\n\n    SummeryParser.prototype.calcRatio = function (recordCount, moment) {\n        return Math.floor(recordCount / moment.daysInMonth() * 100);\n    };\n\n    SummeryParser.prototype.setAverageTable = function () {\n\n        let rowCount = 0;\n        snap.child('rangeEve').forEach(function (snapshot) {\n\n            const rangeTitle = snapshot.key.replace(regExp, '  <i class=\"fas fa-angle-double-right color-orange\"></i>  ');\n            const startMinTotal = snapshot.child('startMin').val();\n            const endMinTotal = snapshot.child('endMin').val();\n            const count = snapshot.child('count').val();\n\n            const startMin = Math.floor(startMinTotal / count);\n            const startTime = min2TimeVal(startMin);\n            const endMin = Math.floor(endMinTotal / count);\n            const endTime = min2TimeVal(endMin);\n            const timeLen = roundWithDigit(Math.abs(startMin - endMin) / 60, 10);\n            rangeDatas[snapshot.key] = {};\n            rangeDatas[snapshot.key]['startMin'] = startMin;\n            rangeDatas[snapshot.key]['endMin'] = endMin;\n            rangeDatas[snapshot.key]['hourLen'] = timeLen;\n            rangeDatas[snapshot.key]['count'] = count;\n            const lenTime = timeLen + \"h\";\n\n            const dom =\n                '<tr class=\"ave-digit\">' +\n                '<td></td>' +\n                '<td class=\"range-title\" rowspan=\"2\">' + rangeTitle + '</td>' +\n                '<td class=\"range-title\">' + count + '回' + '</td>' +\n                '<td class=\"ave-digit-td no-wrap\">' + startTime + '</td>' +\n                '<td class=\"ave-digit-td ave-angle no-wrap\" rowspan=\"2\">' +\n                '<i class=\"fas fa-angle-double-right fa-lg color-orange\"></i>' +\n                '</td>' +\n                '<td class=\"ave-digit-td no-wrap\">' + endTime + '</td>' +\n                '<td class=\"ave-digit-td no-wrap\">' + lenTime + '</td>' +\n                '<td></td>' +\n                '</tr>';\n\n            const row1 = $(dom);\n            // row1.find('.fa-angle-double-right').css('color', colors[0]);\n            const caption =\n                '<tr class=\"caption\">' +\n                '<td></td>' +\n                '<td class=\"no-wrap cap-count\" data-title=\"' + snapshot.key + '\"></td>' +\n                '<td class=\"no-wrap cap-start\" data-title=\"' + snapshot.key + '\"></td>' +\n                '<td class=\"no-wrap cap-end\" data-title=\"' + snapshot.key + '\"></td>' +\n                '<td class=\"no-wrap cap-length\" data-title=\"' + snapshot.key + '\"></td>' +\n                '<td></td>' +\n                '</tr>';\n            const row2 = $(caption);\n            const space = spaceRow.clone(true);\n\n            if(rowCount %2 === 1){\n                space.addClass(\"back-orange\");\n                row1.addClass(\"back-orange\");\n                row2.addClass(\"back-orange\");\n            }\n\n            tbody.append(space)\n                .append(row1)\n                .append(row2)\n                .append(space.clone(true));\n\n            rowCount++;\n        });\n\n        snap.child('timeEve').forEach(function (snapshot) {\n            const rangeTitle = snapshot.key.replace(regExp, '  <i class=\"fas fa-angle-double-right color-orange\"></i>  ');\n            const min = snapshot.child('min').val();\n            const count = snapshot.child('count').val();\n            const hour = Math.floor(min / count);\n            const timeVal = min2TimeVal(hour);\n            eveDatas[snapshot.key] = {};\n            eveDatas[snapshot.key]['min'] = min;\n            eveDatas[snapshot.key]['count'] = count;\n\n            // var average = min2HHMM(getAverage(eveList[eveKey]));\n            const row = $(\n                '<tr class=\"ave-digit\">' +\n                '<td></td>' +\n                '<td class=\"range-title\" rowspan=\"2\">' + rangeTitle + '</td>' +\n                '<td class=\"range-title\">' + count + '回' + '</td>' +\n                '<td class=\"ave-digit-td no-wrap centering\" colspan=\"4\">' + timeVal + '</td>' +\n                '<td></td>' +\n                '</tr>' +\n                '<tr class=\"caption\">' +\n                '<td></td>' +\n                '<td class=\"no-wrap cap-count\" data-title=\"' + snapshot.key + '\"></td>' +\n                '<td class=\"no-wrap centering cap-time-eve\" colspan=\"4\" data-title=\"' + snapshot.key + '\"></td>' +\n                '<td></td>' +\n                '</tr>');\n\n            const space0 = spaceRow.clone(true);\n            const space1 = spaceRow.clone(true);\n            if(rowCount %2 === 1){\n               space0.addClass(\"back-orange\");\n               space1.addClass(\"back-orange\");\n               row.addClass(\"back-orange\");\n           }\n\n           tbody.append(space0)\n               .append(row)\n               .append(space1);\n\n           rowCount++;\n        });\n    };\n\n    SummeryParser.prototype.setPrevCaption = function () {\n        snapPrev.child('rangeEve').forEach(function (snapshot) {\n\n            const startMinTotal = snapshot.child('startMin').val();\n            const endMinTotal = snapshot.child('endMin').val();\n            const count = snapshot.child('count').val();\n\n            const startMin = Math.floor(startMinTotal / count);\n            const endMin = Math.floor(endMinTotal / count);\n            const specStartMin = rangeDatas[snapshot.key]['startMin'];\n            const specEndMin = rangeDatas[snapshot.key]['endMin'];\n            const diffLenTime = roundWithDigit(roundWithDigit(Math.abs(specStartMin - specEndMin) / 60, 10) - roundWithDigit(Math.abs(startMin - endMin) / 60, 10), 10);//ここ、なぜか四捨五入した数値を足し引きすると値がおかしくなる\n            const symbol = diffLenTime < 0 ? '' : '+';\n            const val = '先月より' + symbol + diffLenTime + 'h';\n            $('.cap-length[data-title='+ snapshot.key +']').html(val);\n\n            const diffHourStart = roundWithDigit((specStartMin - startMin) / 60, 10);\n            const symbolStart = diffHourStart < 0 ? '' : '+';\n            const valStart = '先月より' + symbolStart + diffHourStart + 'h';\n            $('.cap-start[data-title='+ snapshot.key +']').html(valStart);\n\n            const diffHourEnd = roundWithDigit((specEndMin - endMin) / 60, 10);\n            const symbolEnd = diffHourEnd < 0 ? '' : '+';\n            const valEnd = '先月より' + symbolEnd + diffHourEnd + 'h';\n            $('.cap-end[data-title='+ snapshot.key +']').html(valEnd);\n\n            const diffCount = rangeDatas[snapshot.key]['count'] - count;\n            const symbolCount = diffCount < 0 ? '' : '+';\n            const valCount = '先月より' + symbolCount + diffCount + '回';\n            $('.cap-count[data-title='+ snapshot.key +']').html(valCount);\n        });\n\n        snapPrev.child('timeEve').forEach(function (snapshot) {\n            const min = snapshot.child('min').val();\n            const count = snapshot.child('count').val();\n            const hour = roundWithDigit(Math.floor(min / count), 10);\n            const diffHour = roundWithDigit(eveDatas[snapshot.key]['min'], 10) - hour;\n            const symbol = diffHour < 0 ? '' : '+';\n            const val = '先月より' + symbol + diffHour + 'h';\n            $('.cap-time-eve[data-title='+ snapshot.key +']').html(val);\n\n            const diffCount = eveDatas[snapshot.key]['count'] - count;\n            const symbolCount = diffCount < 0 ? '' : '+';\n            const valCount = '先月より' + symbolCount + diffCount + '回';\n            $('.cap-count[data-title='+ snapshot.key +']').html(valCount);\n        });\n    };\n\n    function min2TimeVal(min) {\n        // var min = Math.abs(minTotal / count);\n        if (min >= 60*24) {\n            min = min - 60*24;\n            return moment({\n                hour: Math.floor(min / 60),\n                minute: min % 60\n            }).format('HH:mm') + '(翌日)';\n        } else if (min <= 0) {\n            min = min + 60*24;\n            return moment({\n                hour: Math.floor(min / 60),\n                minute: min % 60\n            }).format('HH:mm') + '(前日)';\n        } else {\n            console.log(min % 60, Math.floor(min / 60));\n            return moment({\n                hour: Math.floor(min / 60),\n                minute: min % 60\n            }).format('HH:mm') ;\n        }\n    }\n\n    window.SummeryParser = SummeryParser;\n})();\n\nfunction showData(uid) {\n    let dates;\n    switch (displayMode){\n        case MODE_WEEK:\n            dates = getDaysOfWeek(currentMoment);\n            break;\n        case MODE_MONTH:\n            dates = getDaysOfMonth(currentMoment);\n            break;\n    }\n\n    let getCount = 0;\n    console.log(dates);\n\n    dates.forEach(function (day) {\n        const node = \"usersParam/\" + uid + \"/\" + day;\n        defaultDatabase.ref(node).once('value').then(function(snapshot) {\n            if(!snapshot.exists()){\n                masterJson[day] = null;\n            } else {\n                const masterData = [];\n                snapshot.forEach(function (arr) {\n                    arr = arr.toJSON();\n                    if(arr[\"dataType\"] === 2 || arr[\"dataType\"] === 3){\n                        const newArr = [];\n                        Object.values(arr[\"data\"]).forEach(function (value) {\n                            newArr.push(value);\n                        });\n                        arr[\"data\"] = newArr;\n                    }\n                    masterData.push(arr);\n                });\n                masterJson[day] =  masterData;\n            }\n\n            getCount++;\n\n            //最後のデータかどうかをチェック\n            if(getCount === dates.length){\n                console.log(masterJson);\n                displayTest();\n            }\n        });\n    });\n}\n\nfunction restUi() {\n    bgParam.html(\"\");\n    smParam.html(\"\");\n    bgParam.parent().next().html(\"\");\n    chartWrapper.children().remove();\n\n    $('<canvas>', {\n       id: 'chart_div'\n    }).appendTo(chartWrapper);\n    tbody.html(\"\");\n    myChart = null;\n    masterJson = {};\n}\n\nfunction displayTest() {\n    //dataType === 1のものを集計する。\n    const keys = Object.keys(masterJson);\n    const timeData = {};\n    setTitle(displayMode, keys[0]);\n    chart(displayMode, keys[0]);\n\n    let date = 0;\n    keys.forEach(function (key) {\n        if(masterJson[key]){\n            masterJson[key].forEach(function (data) {\n                if(data[\"dataType\"] === 1){\n                    const json = JSON.parse(data[\"data\"][\"0\"]);\n                    console.log(json);\n                    timeData[key] = json;\n                    // var date = moment(key, \"YYYYMMDD\").date();\n                    json.rangeList.forEach(function (entry) {\n\n                        const start = getTime(entry.start);\n                        const end = getTime(entry.end);\n                        const timeVal = getTimeVal(entry.start) + \" → \" + getTimeVal(entry.end);\n                        console.log(entry.start);\n                        const label = entry.start.name + \" → \" + entry.end.name;\n\n                        if (entry.start.offset === entry.end.offset){\n\n                            pushData(getRangeArr(date, start, end, entry.start.offset), date, entry.colorNum, label, timeVal, true, true);\n\n                        } else if (entry.end.offset - entry.start.offset === 1){\n\n                            date -= entry.start.offset;\n                            pushData(getRangeStart(date, start), date, entry.colorNum, label, timeVal, true, false);\n                            date += 1;\n                            pushData(getRangeEnd(date, end), date, entry.colorNum, label, timeVal, false, true);\n\n                        } else if (entry.end.offset - entry.start.offset === 2){\n\n                            date -= entry.start.offset;\n                            pushData(getRangeStart(date, start), date, entry.colorNum, label, timeVal, true, false);\n\n                            date += 1;\n                            const arrH = [];\n                            for(let i=0; i<=24; i++){\n                                arrH.push(date);\n                            }\n\n                            pushData(arrH, date, false, false);\n\n                            date += 1;\n                            pushData(getRangeEnd(date, start), date, entry.colorNum, label, timeVal, false, true);\n                        }\n                    });\n\n                    json.eventList.forEach(function (entry) {\n                        const time = getTime(entry);\n                        const timeVal = getTimeVal(entry);\n                        pushData(getRangeArr(date, time, time, 0), date, entry.colorNum, entry.name, timeVal);\n                    });\n                }\n            });\n        }\n\n        date++;\n    });\n\n    // showAverage(timeData);\n\n    initTabLayout2();\n    // var table = $('#table-others');\n    // var tableWidth = table.css({ position: \"absolute\", visibility: \"hidden\", display: \"block\" });\n    // table.css({ position: \"\", visibility: \"\", display: \"\" });\n    // $('.mdl-mini-footer').css('min-width', tableWidth+1);\n\n    // innerProgress.css('display', \"none\");\n    progress.hide();\n    pageContent.css('display', 'block');\n    postLoad.css('display', 'block');\n\n    myChart.update();\n\n    headerBtnEnable = true;\n}\n\nfunction setTitle(mode, firstDate) {\n    console.log(firstDate);\n    const titleMonth = $('#chart_title_w_month');\n    const titleWeek = $('#chart_title_w');\n    const momentO = moment(firstDate.toString(), \"YYYYMMDD\");\n    switch (mode){\n        case MODE_WEEK:\n            const start = momentO.format('MM.DD') + \"(\" + wodList[0] + \")\";\n            momentO.add(mode-1, 'd');\n            const end = momentO.format('MM.DD') + \"(\" + wodList[MODE_WEEK - 1] + \")\";\n            console.log(end);\n            $('#chart_title_start').html(start);\n            $('#chart_title_end').html(end);\n            titleMonth.css('display', 'none');\n            titleWeek.css('display', 'inline');\n            break;\n        case MODE_MONTH:\n            titleMonth.html((momentO.month()+1) + \"月\");\n            titleMonth.css('display', 'inline');\n            titleWeek.css('display', 'none');\n            break;\n    }\n}\n\nfunction chart(mode, firstKey) {\n    const maximum = getMaximumFromMode(mode);\n    const startCal = getStartCal(mode, firstKey);\n\n    // var dates = getDateYmds(mode, startCal, maximum);\n    const yAxis = getYaxis(mode, startCal, maximum);\n    // var fontColors = [];\n    // yAxis.forEach(function (value) {\n    //    if(value.indexOf('日')){\n    //        fontColors.push('#dd3734');\n    //    } else {\n    //        fontColors.push(null);\n    //    }\n    // });\n\n    const ctx = $('#chart_div');\n    switch (mode){\n        case MODE_MONTH:\n            chartWrapper.css('height', 1000);//todo これはこれでいいのか？\n            break;\n        case MODE_WEEK:\n            chartWrapper.removeAttr('style');\n            break;\n    }\n\n    // var keys = Object.keys(masterJson);\n    myChart = new Chart(ctx[0].getContext(\"2d\"), {\n        type: 'line',\n        data: {\n            labels: makeXaxis(),\n            datasets: []\n        },\n        options: {\n            responsive: true,\n            maintainAspectRatio: mode !== MODE_MONTH,\n            scales: {\n                yAxes: [{\n                    ticks: {\n                        suggestedMin: 0,\n                        suggestedMax: maximum,\n                        reverse: true,\n                        stepSize: 1,\n                        // fontColor: fontColors,\n                        callback: function (value, index, values) {\n                            if (index === maximum)\n                                return null;\n\n                            return yAxis[value];\n                        }\n                    }\n                }],\n                xAxes: [{\n                    ticks: {\n                        callback: function(value, index, values) {\n                            if(value)\n                                return value;\n                        },\n                        autoSkip: true,\n                        maxRotation: 0,\n                        minRotation: 0\n                    },\n                    display: true\n                }]\n            },\n            legend: {\n                display: false\n            },\n            tooltips: {\n                callbacks: {\n                    intersect: false,\n                    mode: 'point',\n                    title: function (toolTips, data) {\n                        console.log(toolTips, data);\n                        return yAxis[toolTips[0][\"yLabel\"]];\n                    },\n                    label: function (tooltipItem, data) {\n                        const arr = data[\"datasets\"][tooltipItem.datasetIndex];\n                        return arr.label +\" \"+ arr.timeVal;\n                    }\n                }\n            }\n        }\n    });\n}\n\nfunction getStartCal(mode, firstKey) {\n    let cal = moment(firstKey, 'YYYYMMDD');\n    if(mode === MODE_MONTH){\n        cal = cal.startOf('month');\n        console.log(\"getStartCal\", \"こっち\");\n    }\n    return cal;\n}\n\nfunction getYaxis(mode, firstCal, maximum) {\n    const cal = moment(firstCal);\n    const yAxis = [];\n    let month = null;\n    for(let i=0; i<maximum; i++){\n        let value;\n        if(mode === MODE_WEEK && (i === 0 || cal.month() !== month)){\n            month = cal.month();\n            value = cal.format('MM/DD');\n        } else {\n            value = cal.format('DD');\n        }\n        yAxis.push(value +\"(\"+ wodList[cal.day()] +\")\");\n        cal.add(1, 'd');\n    }\n\n    return yAxis;\n}\n\nfunction getMaximumFromMode(mode) {\n    switch (mode){\n        case MODE_WEEK:\n            return 7;\n        case MODE_MONTH:\n            return currentMoment.endOf('month').date();\n    }\n}\n\n/*---------------描画まわり-------------*/\nfunction makeXaxis() {\n    const arr = [];\n    const limit = 24 * 4;\n    for (let i=0; i<=limit; i++){\n        if(i === 0) {\n            arr.push(i);\n        } else if(i%8 === 0) {\n            arr.push(i/4);\n        } else {\n            arr.push(null);\n        }\n    }\n    return arr;\n}\n\nfunction getTime(entryC) {\n    const hour = entryC.cal.hourOfDay;\n    const min = entryC.cal.minute;\n    return hour + min/60\n}\n\nfunction getTimeVal(entryC) {\n    const hour = entryC.cal.hourOfDay;\n    const min = entryC.cal.minute;\n    const time = moment();\n    time.hour(hour);\n    time.minute(min);\n    return time.format('HH:mm');\n}\n\nfunction pushData(arr, date, colorNum, label, timeVal, showStartRadius, showEndRadius) {\n    const color = colors[colorNum];\n    const radiuses = setRadius(arr, date, showStartRadius, showEndRadius);\n    myChart.data.datasets.push({\n        data: arr,\n        label: label,\n        pointRadius: radiuses,\n        pointHoverRadius: radiuses,\n        backgroundColor: color,\n        pointHoverBackgroundColor: color,\n        borderColor: color,\n        fill: false,\n        timeVal: timeVal\n    });\n}\n\nfunction setRadius(dataArr, date, showStartRadius, showEndRadius) {\n    const start = dataArr.indexOf(date);\n    const end = dataArr.lastIndexOf(date);\n    console.log(start +\", \"+ end);\n    const radiusArr = [];\n    for (let i=0; i<dataArr.length; i++){\n        if ((showStartRadius && i === start) || (showEndRadius && i === end)) {\n            radiusArr.push(5);\n        } else {\n            radiusArr.push(0);\n        }\n    }\n    return radiusArr;\n}\n\nfunction getRangeArr(date, start, end, offset) {\n    const arrC = [];\n    date = date + offset;\n    const limit = 24 * 4;\n    for(let n=0; n<=limit; n++){\n        if (start*4<=n && n<end*4+1){\n            arrC.push(date);\n        } else {\n            arrC.push(null);\n        }\n    }\n    return arrC;\n}\n\nfunction getRangeStart(date, start) {\n    const arrD = [];\n    for (let n=0; n<=24*4; n++){\n        if (start*4 < n){\n            arrD.push(date);\n        } else {\n            arrD.push(null);\n        }\n    }\n    return arrD;\n}\n\nfunction getRangeEnd(date, end) {\n    const arrE = [];\n    for (let n=0; n<=24*4; n++){\n        if (n <= end*4){\n            arrE.push(date);\n        } else {\n            arrE.push(null);\n        }\n    }\n    console.log(arrE);\n    return arrE;\n}\n/*---------------描画まわりここまで-------------*/\n\n/*---------------分析画面系ここから-------------*/\n// function showAverage(timeData) {\n//    var ranges = generateAveArr(timeData);\n//    var count = 0;\n//    for(var key in ranges){\n//        if(ranges.hasOwnProperty(key)){\n//            var aveStart = getAverage(ranges[key][\"start\"]);\n//            var aveEnd = getAverage(ranges[key][\"end\"]);\n//            var aveLen = roundWithDigit(Math.abs(aveStart - aveEnd)/60, 10) + \"h\";\n//            //DOMを挿入\n//            var dom =\n//                '<tr class=\"ave-digit\">' +\n//                    '<td class=\"range-title\" rowspan=\"2\">'+ key +'</td>' +\n//                    '<td class=\"ave-digit-td no-wrap\">'+ min2HHMM(aveStart)+'</td>' +\n//                    '<td class=\"ave-digit-td ave-angle no-wrap\" rowspan=\"2\">' +\n//                         '<i class=\"fas fa-angle-double-right fa-lg color-orange\"></i>' +\n//                    '</td>' +\n//                    '<td class=\"ave-digit-td no-wrap\">'+ min2HHMM(aveEnd) +'</td>' +\n//                    '<td class=\"ave-digit-td no-wrap\">'+ aveLen +'</td>' +\n//                '</tr>';\n//            var row1 = $(dom);\n//            row1.find('.fa-angle-double-right').css('color', colors[ranges[key]['colorNum']]);\n//            var caption =\n//                '<tr class=\"caption\">' +\n//                    '<td class=\"no-wrap\">先週より+2h15min</td>' +\n//                    '<td class=\"no-wrap\">先週より-45min</td>' +\n//                    '<td class=\"no-wrap\">先週より+2h15min</td>' +\n//                '</tr>';\n//            var row2 = $(caption);\n//            var space = generateTableBorder(\"table-space\");\n//            if(count %2 === 1){\n//                space.addClass(\"back-orange\");\n//                row1.addClass(\"back-orange\");\n//                row2.addClass(\"back-orange\");\n//                // row1.find('i').addClass(\"color-orange\");\n//            // } else {\n//            //     row1.find('i').addClass(\"color-disable\");\n//            }\n//            // var seem = generateTableBorder(\"table-seem\");\n//            tbody.append(space)\n//                .append(row1)\n//                .append(row2)\n//                .append(space.clone(true));\n//\n//            count++;\n//        }\n//    }\n//\n//    var eveList = generateAveArrEve(timeData);\n//    for(var eveKey in eveList){\n//        if(eveList.hasOwnProperty(eveKey)){\n//            var average = min2HHMM(getAverage(eveList[eveKey]));\n//            var row = $(\n//                '<tr class=\"ave-digit\">'+\n//                    '<td class=\"range-title\" rowspan=\"2\">'+ eveKey +'</td>'+\n//                    '<td class=\"ave-digit-td no-wrap centering\" colspan=\"4\">'+ average +'</td>'+\n//                '</tr>'+\n//                '<tr class=\"caption\">'+\n//                     '<td class=\"no-wrap centering\" colspan=\"4\">先週より+2h15min</td>'+\n//                '</tr>');\n//\n//            var space0 = space.clone(true);\n//            var space1 = space.clone(true);\n//            if(count %2 === 1){\n//                space0.addClass(\"back-orange\");\n//                space1.addClass(\"back-orange\");\n//                row.addClass(\"back-orange\");\n//            }\n//\n//            tbody.append(space0)\n//                .append(row)\n//                .append(space1);\n//\n//            count++;\n//        }\n//    }\n//\n//    //データが皆無であればその旨を表示\n//     var tableOhters = $('#table-others');\n//     if(count === 0){\n//         errNonData.css('display', \"block\");\n//         tableOhters.css('display', \"none\");\n//     } else {\n//         errNonData.css('display', \"none\");\n//         tableOhters.css('display', \"block\");\n//     }\n//\n// }\n\n// function generateAveArr(timeData) {\n//     var ranges = {};\n//     for(var key in timeData){\n//         if(timeData.hasOwnProperty(key)){\n//             timeData[key][\"rangeList\"].forEach(function (range) {\n//                 var name = range.start.name + '  <i class=\"fas fa-angle-double-right color-orange\"></i>  ' + range.end.name;\n//                 if(!ranges.hasOwnProperty(name)){\n//                     ranges[name] = {};\n//                     ranges[name].start = [];\n//                     ranges[name].end = [];\n//                 }\n//                 var startTime = range.start.cal.hourOfDay *60 + range.start.cal.minute + range.end.offset *24*60;\n//                 var endTime = range.end.cal.hourOfDay *60 + range.end.cal.minute + range.end.offset *24*60;\n//                 ranges[name].start.push(startTime);\n//                 ranges[name].end.push(endTime);\n//             });\n//         }\n//     }\n//     return ranges;\n// }\n//\n// function generateAveArrEve(timeData) {\n//     var eves = {};\n//     for(var key in timeData){\n//         if(timeData.hasOwnProperty(key)){\n//             timeData[key][\"eventList\"].forEach(function (event) {\n//                 if(!eves.hasOwnProperty(event.name)){\n//                     eves[event.name] = [];\n//                 }\n//                 eves[event.name].push(event.cal.hourOfDay *60 + event.cal.minute);\n//             });\n//         }\n//     }\n//     return eves;\n// }\n//\n// function getAverage(arr) {\n//     var sum = 0;\n//     arr.forEach(function (time) {\n//         sum += time;\n//     });\n//     if(sum){\n//         var aveStart = sum / (arr.length);\n//         sum = Math.round(aveStart);\n//     }\n//     return sum;\n// }\n\nfunction roundWithDigit(num, digit) {\n    return Math.round(num*digit)/digit;\n}\n\n// function min2HHMM(min) {\n//     var m = moment();\n//     m.minute(min);\n//     return m.format('HH:mm');\n// }\n\nfunction generateTableBorder(className) {\n    const td = ($('<td>', {\n        class: className,\n        colspan: 8\n    }));\n    return $('<tr>').append(td);\n}\n\n/*-----------------------tabLayout2--------------------------*/\nfunction initTabLayout2() {\n    const bgColumns = [];\n    const smColumns = {};\n    $('<td>', {rowspan: 2}).html('日にち')\n        .appendTo(bgParam);\n    for(let key in masterJson){\n        if(masterJson.hasOwnProperty(key) && masterJson[key]){\n            masterJson[key].forEach(function (data) {\n                switch (data.dataType){\n                    case 2:\n                        // addBgColumn(bgColumns, bgParam, data);\n                        // addSmColumn(smColumns, smParam, data, 0);\n                        addNormalColumn(bgColumns, bgParam, data);\n                        break;\n                    case 3:\n                        addBgColumn(bgColumns, bgParam, data);\n                        addSmColumn(smColumns, smParam, data, 1);\n                        break;\n                    case 4:\n                        addNormalColumn(bgColumns, bgParam, data);\n                        break;\n                }\n            });\n        }\n    }\n\n    fixBgColumnSpan(bgParam, smColumns);\n\n    addRowsToTable(smParam, bgParam, bgColumns, smColumns);\n}\n\n/*----------------thead系--------------*/\nfunction addNormalColumn(bgColumns, bgParam, data) {\n    if(bgColumns.indexOf(data.dataName) === -1){\n        $('<td>', {\n            rowspan: 2\n        }).html(data.dataName)\n            .appendTo(bgParam);\n        bgColumns.push(data.dataName);\n    }\n}\n\nfunction addBgColumn(bgColumns, bgParam, data) {\n    if(bgColumns.indexOf(data.dataName) === -1){\n        $('<td>').html(data.dataName)\n            .appendTo(bgParam);\n        bgColumns.push(data.dataName);\n    }\n}\n\nfunction addSmColumn(smColumns, smParam, data, valuePos) {\n    data.data.forEach(function (value) {\n        const html = value.split(DELIMITER)[valuePos];\n        if(!smColumns[data.dataName]){\n            smColumns[data.dataName] = [];\n        }\n        if(smColumns[data.dataName].indexOf(html) === -1){\n            $('<td>').html(html)\n                .appendTo(smParam);\n            if(smColumns)\n                smColumns[data.dataName].push(html);\n        }\n    });\n}\n\nfunction fixBgColumnSpan(bgParam, smColumns) {\n    for(let key in smColumns){\n        if(smColumns.hasOwnProperty(key)){\n            bgParam.find(\"td:contains(\"+ key +\")\").attr('colspan', smColumns[key].length);\n        }\n    }\n}\n\n/*----------------------tbody系-----------------------*/\nfunction addRowsToTable(smParam, bgParam, bgColumns, smColumns) {\n\n    const smVals = Object.values(smColumns);\n    const tbody = $('#table-others').find('tbody');\n    let totalLen = 0;\n    const smColumnVals = Object.values(smColumns);\n    const smColumnKeys = Object.keys(smColumns);\n    smColumnVals.forEach(function (arr) {\n        totalLen += arr.length;\n    });\n    const len = bgColumns.length + totalLen - smColumnVals.length + 1;//+1は日付の分\n\n    const masterKeys = Object.keys(masterJson);\n    for(let k=0; k<masterKeys.length; k++){\n\n        const tr = $('<tr>');\n        if(k%2){\n            tr.css('background-color', \"#f9f9f7\");\n        }\n\n        for (let i = 0; i<len; i++) {\n            var td = $('<td>');\n            tr.append(td);\n            if(i === 0){\n                td.addClass('row-head');\n            }\n        }\n        const cal = moment(masterKeys[k], \"YYYYMMDD\");\n        const date = cal.date();\n        const title = date + \"日(\" + wodList[cal.day()] + \")\";\n        const rowHead = tr.find('td').eq(0);\n        rowHead.html(title);\n        //日曜日であれば赤色に\n        if(cal.day() === 0){\n            rowHead.addClass('holiday');\n        }\n\n        //休日であれば赤色にしてtippy表示\n        const holidayKey = cal.format(\"YYYY-MM-DD\");\n        const holidayPos = Object.keys(HOLIDAYS).indexOf(holidayKey);\n        if(holidayPos !== -1){\n            rowHead.attr('title',   HOLIDAYS[holidayKey]);\n            rowHead.addClass('holiday');\n        }\n\n\n        if(masterJson[masterKeys[k]]){\n            masterJson[masterKeys[k]].forEach(function (data) {\n                if(!data.data || data.dataType === 0 || data.dataType === 1)\n                    return;\n\n                let count = bgColumns.indexOf(data.dataName);\n                const keyLen = smColumnKeys.indexOf(data.dataName);\n                count -= keyLen;\n                for(let n=0; n<keyLen; n++){\n                    count += smColumnVals[n].length;\n                }\n                // count++;//日付カラムの分\n                // console.log(data.dataName + \"は\" + count + \"の並びにあります\");\n\n                switch (data.dataType) {\n                    case 2:\n                        const td0 = tr.find('td').eq(count);\n                        const titleVal = data.dataName + \" \" + title;\n                        setTagInCell(td0, data, titleVal);\n                        break;\n                    case 3:\n                        for(let m=0; m<data.data.length; m++){\n                            const pos = count + m + 1;\n                            const vals = data.data[m].split(DELIMITER);\n                            const tdE = tr.find('td').eq(pos);\n                            const titleValE = data.dataName + \" : \" + vals[1] + \" \" + title;\n                            if(vals[0] === \"0\"){\n                                const span = $('<span>', {\n                                    title: titleValE\n                                });\n                                if(vals[2] === \"true\"){\n                                    span.html('<i class=\"fas fa-check color-orange\"></i>').appendTo(tdE);\n                                } else if(vals[2] === \"false\"){\n                                    span.html('<i class=\"fas fa-times color-disable\"></i>').appendTo(tdE);\n                                }\n                            } else if(vals[0] === \"1\"){\n                                $('<span>', {\n                                    title: titleValE\n                                }).html(vals[2]).appendTo(tdE);\n                            }\n                        }\n                        break;\n                    case 4:\n                        // todo 本来は\"comment\"ノードに格納されているので、実装後この点を修正すること\n                        const td = tr.find('td').eq(count);\n                        if(data.data.length > 100) {\n                            // todo ここら辺の改行とかの動作、もうちょっとうまくやれるはず\n                            let value = null;\n                            if(data.data.indexOf(\"\\n\") === data.data.lastIndexOf(\"\\n\")){\n                                //改行が2箇所以上ある場合\n                                value = data.data.substring(0, 80) + \"...\";\n                            } else {\n                                const first = data.data.indexOf(\"\\n\");\n                                const second = data.data.substring(first).indexOf(\"\\n\");\n                                value = data.data.substring(0, second);\n                            }\n                            value = value.replace(/(?:\\r\\n|\\r|\\n)/g, '<br />');\n                            td.attr(\"full-txt\", data.data);\n                            td.html(value);\n                            const dropDownBtn = $('<i>', {\n                                class: \"fas fa-caret-down fa-lg color-orange\",\n                                onclick: \"expandText(this)\",\n                                title: data.dataName + \" \" + title\n                            });\n                            td.append($('<br />')).append(dropDownBtn);\n                        } else {\n                            td.html(data.data);\n                        }\n                        break;\n                }\n            });\n        }\n\n        tbody.append(tr);\n    }\n\n    setElementAsMdl(tbody);\n\n    tippy('[title]', {\n        updateDuration: 0,\n        popperOptions: {\n            modifiers: {\n                preventOverflow: {\n                    enabled: false\n                }\n            }\n        }\n    });\n}\n\nfunction setTagInCell(td, data, title) {\n    for(let m=0; m<data.data.length; m++){\n        const vals = data.data[m].split(DELIMITER);\n        if(vals[2] === \"true\")\n            continue;\n\n        const color = highlightColors[parseInt(vals[1])];\n        const chipsHtml = $(\n            '<span class=\"mdl-chip mdl-pre-upgrade\" style=\"background-color: ' + color + '\" title=\"' + title + '\">' +\n            '<span class=\"mdl-chip__text\">' + vals[0] + '</span>' +\n            '</span>');\n        td.append(chipsHtml);\n    }\n}\n\n//todo アニメーションつけられると尚良し\nfunction expandText(ele) {\n    console.log(\"expandText called\");\n    const td = $(ele).closest('td');\n    let txt = td.attr(\"full-txt\");\n    txt = txt.replace(/(?:\\r\\n|\\r|\\n)/g, '<br />');\n    td.html(txt);\n}\n\nfunction setElementAsMdl(clone) {\n    const ele = clone.find(\".mdl-pre-upgrade\");\n    for (let i=0; i<ele.length; i++){\n        componentHandler.upgradeElement(ele.eq(i)[0]);\n    }\n}"]}